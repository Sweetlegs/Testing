<!-- /sections/index-instafeed .liquid-->
<div class="homepage-page homepage-instagram {{ section.settings.homepage_page_color }}">
  <div class="wrapper">
    <div class="grid">
      <div class="grid__item">
        {% if section.settings.subtitle != '' %}
          <h4 class="h3--accent text-center strong mb0">{{ section.settings.subtitle | escape }}</h4>
        {% endif %}
        {% if section.settings.title != '' %}
          <h4 class="home__subtitle">{{ section.settings.title | escape }}</h4>
        {% endif %}
        <div class="grid-uniform grid--full">
          <div id="insta-feed"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  function defer(method) {
    if (window.$ && window.$('#insta-feed .instafeed-container').length && window.$('#insta-feed').slick) {
      method();
    } else {
      setTimeout(function() { defer(method) }, 500);
    }
  }
  defer(function() {
    $('#insta-feed').slick({
      infinite: true,
      slide: 'a:not(.instafeed-lightbox)',
      slidesToShow: 3,
      slidesToScroll: 2,
      dots: false,
      responsive: [
        {
          breakpoint: 1000,
          settings: {
            slidesToShow: 3,
            slidesToScroll: 1,
            infinite: true,
            dots: true
          }
        },
        {
          breakpoint: 768,
          settings: {
            slidesToShow: 2,
            slidesToScroll: 1,
            infinite: true,
            dots: true
          }
        },
        {
          breakpoint: 400,
          settings: {
            slidesToShow: 2,
            slidesToScroll: 1,
            infinite: true,
            dots: true
          }
        },
      ]
    })
  });
</script>

{% schema %}
{
  "name": "Instafeed",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Rich Text"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Sub Heading"
    },
    {
      "type": "select",
      "id": "homepage_page_color",
      "label": "Background color",
      "default": "homepage--white",
      "options": [
        { "value": "homepage--white", "label": "White"},
        { "value": "homepage--light", "label": "Light"},
        { "value": "homepage--splash", "label": "Accent"},
        { "value": "homepage--dark", "label": "Dark"}
      ]
    }
  ],
  "presets": [{
    "name": "Instafeed (Proper)",
    "category": "Custom"
  }]
}
{% endschema %}