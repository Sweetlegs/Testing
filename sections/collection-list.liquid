<div
  data-section-id="{{ section.id }}"
  data-section-type="collection-list"
  class="
    collection-list1
    collection-list--columns-{{ section.settings.columns }}1
    section
    {{ section.settings.section_padding }}

    {% if section.settings.section_contrast -%}
      section--contrast
    {%- endif %}

    {% if settings.contrast_spacer -%}
      section--contrast-spacer
    {%- endif %}
  "
  style="
    --text-max-width: {{ section.settings.text_max_width }}rem;
    --padding-amount: {{ section.settings.padding_amount }};
  "
>
    <div class="section__inner template-{{ template.name }}">
    {% render 'section-header',
      heading: section.settings.title,
      subheading: section.settings.subheading,
      classes: 'section-header--large section-header--center',
    %}

    <div class="collection-list__grid1" data-slider>
      <div class='collection-list__wrapper'>
        {%- for block in section.blocks -%}
          {%- assign featured_collection = block.settings.collection -%}
          {%- if featured_collection != empty -%}
            <div class="collection-list__slide">
              {% render 'collection-item' with
                collection: featured_collection,
                subheading: block.settings.subheading,
                aspect_ratio: section.settings.aspect_ratio,
                text_max_width: block.settings.text_max_width,
              %}
            </div>
          {%- else -%}
            <div class="collection-list__slide">
              {% render 'collection-item' with collection: empty, aspect_ratio: section.settings.aspect_ratio %}
            </div>
          {%- endif -%}
        {%- else -%}
          {%- for i in (1..columns) -%}
            <div class="collection-list__slide">
              {% render 'collection-item' with collection: empty, aspect_ratio: section.settings.aspect_ratio %}
            </div>
          {%- endfor -%}
        {%- endfor -%}
      </div>

      {% render 'carousel-navigation' with columns: 3, item_count: section.blocks.size %}
    </div>
  </div>
</div>
<script>
var windowObject = window;
function showCarousel() {
     var screenWidth = window.innerWidth;
if (screenWidth < 680) {
        var sliderElements = document.querySelectorAll(".collection-list__slide");
    
    // Loop through the elements and add the data-slider attribute
    for (var i = 0; i < sliderElements.length; i++) {
        sliderElements[i].setAttribute("data-slide", "true");
    } 
} else {
      var sliderElements = document.querySelectorAll(".collection-list__slide");

    // Loop through the elements and add the data-slider attribute
    for (var i = 0; i < sliderElements.length; i++) {
        sliderElements[i].removeAttribute("data-slide");
    }
}
}
showCarousel();
windowObject.addEventListener("scroll", function() {
showCarousel();
});


</script>
{% schema %}
  {
    "name": "t:sections.collection_list.name",
    "tag": "section",
    "class": "shopify-section--stackable shopify-section--text-first",
    "settings": [
      {
        "type": "range",
        "id": "columns",
        "label": "t:sections.collection_list.settings.columns.label",
        "min": 2,
        "max": 6,
        "step": 1,
        "default": 3
      },
      {
        "type": "text",
        "id": "title",
        "label": "t:sections.collection_list.settings.title.label"
      },
      {
        "type": "richtext",
        "id": "subheading",
        "label": "t:sections.collection_list.settings.subheading.label"
      },
      {
        "type": "range",
        "id": "text_max_width",
        "label": "t:sections.collection_list.settings.text_max_width.label",
        "min": 24,
        "max": 48,
        "step": 1,
        "default": 42
      },
      {
        "id": "aspect_ratio",
        "type": "select",
        "label": "t:sections.collection_list.settings.aspect_ratio.label",
        "options": [
          {
            "label": "t:sections.collection_list.settings.aspect_ratio.options__1",
            "value": "natural"
          },
          {
            "label": "t:sections.collection_list.settings.aspect_ratio.options__2",
            "value": "round"
          },
          {
            "label": "t:sections.collection_list.settings.aspect_ratio.options__3",
            "value": "square"
          },
          {
            "label": "t:sections.collection_list.settings.aspect_ratio.options__4",
            "value": "landscape"
          },
          {
            "label": "t:sections.collection_list.settings.aspect_ratio.options__5",
            "value": "portrait"
          }
        ],
        "default": "natural"
      },
      {
        "type": "header",
        "content": "t:shared.settings.section_style.header_style.content"
      },
      {
        "id": "section_contrast",
        "type": "checkbox",
        "label": "t:sections.collection_list.settings.section_contrast.label",
        "default": false
      },
      {
        "type": "select",
        "id": "section_padding",
        "label": "t:shared.settings.section_style.section_padding.label",
        "default": "section--vertical-padding-top-bottom",
        "options": [
          {
            "label": "t:shared.settings.section_style.section_padding.option_both",
            "value": "section--vertical-padding-top-bottom"
          },
          {
            "label": "t:shared.settings.section_style.section_padding.option_top",
            "value": "section--vertical-padding-top-only"
          },
          {
            "label": "t:shared.settings.section_style.section_padding.option_bottom",
            "value": "section--vertical-padding-bottom-only"
          },
          {
            "label": "t:shared.settings.section_style.section_padding.option_none",
            "value": "section--vertical-padding-none"
          }
        ]
      },
      {
        "type": "select",
        "id": "padding_amount",
        "label": "t:shared.settings.section_style.padding_amount.label",
        "default": "1.0",
        "options": [
          {
            "label": "t:shared.settings.section_style.padding_amount.option_full",
            "value": "1.0"
          },
          {
            "label": "t:shared.settings.section_style.padding_amount.option_half",
            "value": "0.5"
          },
          {
            "label": "t:shared.settings.section_style.padding_amount.option_minimum",
            "value": "0.075"
          }
        ]
      }
    ],
    "blocks": [
      {
        "type": "collection",
        "name": "t:sections.collection_list.blocks.collection.name",
        "settings": [
          {
            "id": "collection",
            "type": "collection",
            "label": "t:sections.collection_list.blocks.collection.settings.collection.label"
          },
          {
            "id": "subheading",
            "type": "richtext",
            "label": "t:sections.collection_list.blocks.collection.settings.subheading.label"
          },
          {
            "type": "range",
            "id": "text_max_width",
            "label": "t:sections.collection_list.blocks.collection.settings.text_max_width.label",
            "min": 24,
            "max": 48,
            "step": 1,
            "default": 42
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "t:sections.collection_list.presets.name",
        "blocks": [
          {
            "type": "collection"
          },
          {
            "type": "collection"
          },
          {
            "type": "collection"
          }
        ]
      }
    ]
  }
{% endschema %}
