{% capture style_custom_color %}
  {% if section.settings.custom_color %}
    color: {{ section.settings.body_text_color }} !important
  {% endif %}
{% endcapture %}

<div class="count-section wrapper arena-heading {{ section.id }}">
  {% for block in section.blocks %}
    {% if block.type == 'headline' %}
      <div class="--block --template-2 product-section-infos {{ block.settings.alignment }}">
        <p
          class="--block --template-2 headline heading-neue {{ block.settings.font_style }}"
          style="{{ style_custom_color }}"
        >
          {{ block.settings.heading }}
        </p>
        <h3 class="product-title --template-2 heading-neue" style="{{ style_custom_color }}">
          {{ section.settings.product.title }}
        </h3>
        <h4 class="product-price heading-neumeister-a" style="{{ style_custom_color }}">
          {{ section.settings.product.price | money | remove: ".00" }}
        </h4>
      </div>
    {% elsif block.type == 'counter' %}
      <div class="--block section-counter {{ block.settings.alignment }}" style="{{ style_custom_color }}"></div>
    {% elsif block.type == 'text_block' %}
      <div class="--block text-block {{ block.settings.alignment }}">
        <p class="text" style="{{ style_custom_color }}">{{ block.settings.text_block | strip_html }}</p>
        <a
          href="{{ section.settings.product.url }}"
          class="hero__btn {{ block.settings.button_style }} {{ block.settings.button_color }}"
        >
          {{- block.settings.cta_text -}}
        </a>
      </div>
    {% endif %}
  {% endfor %}
</div>

<style>
   {% if section.settings.large_background %}
    .arena-heading.{{ section.id }} {
        background-image: url("{{ section.settings.large_background | image_url: width: 800 }}");
        background-repeat: no-repeat;
        background-position: center;
        background-size: cover;
        min-height: {{ section.settings.large_background.height | append : "px" }};
        padding: var(--outer);
    }
    {% endif %}
    .wrapper.arena-heading.{{ section.id }} > .--block {
        flex: 1;
        display: flex;
    }
    .wrapper.arena-heading.{{ section.id }} .--block.w--left {
        align-self: flex-start;
    }
    .wrapper.arena-heading.{{ section.id }} .--block.w--center {
        align-self: center;
    }
    .wrapper.arena-heading.{{ section.id }} .--block.w--right {
        align-self: flex-end;
    }
    .wrapper.arena-heading.{{ section.id }} .--block.h--top {
        justify-content: flex-start;
    }
    .wrapper.arena-heading.{{ section.id }} .--block.h--middle {
        justify-content: center;
    }
    .wrapper.arena-heading.{{ section.id }} .--block.h--top {
        justify-content: flex-end;
    }
  @media(max-width: 767px){
    {% if section.settings.small_background %}
    .arena-heading.{{ section.id }} {
      background-image: url("{{ section.settings.small_background | image_url: width: 800 }}");
      background-repeat: no-repeat;
      background-position: center;
      min-height: {{ section.settings.small_background.height | append : "px" }};
    }
    {% endif %}
    .arena-heading-image-block{
      display: none;
    }
  }
</style>
{% schema %}
{
  "name": "Arena Product Section 2",
  "settings": [
    {
      "type": "image_picker",
      "id": "large_background",
      "label": "Background Image (Desktop)"
    },
    {
      "type": "image_picker",
      "id": "small_background",
      "label": "Background Image (max-width 767px)"
    },
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    },
    {
      "type": "checkbox",
      "id": "custom_color",
      "label": "Overwrite text color?",
      "default": false
    },
    {
      "type": "color",
      "id": "body_text_color",
      "label": "Body color",
      "default": "#000000"
    }
  ],
  "blocks": [
    {
      "type": "headline",
      "name": "Heading",
      "settings": [
        {
          "type": "select",
          "id": "alignment",
          "label": "Block Alignment",
          "options": [
            {
              "value": "h--top w--left ",
              "label": "Top/Left"
            },
            {
              "value": "h--top w--center ",
              "label": "Top/Center"
            },
            {
              "value": "h--top w--right ",
              "label": "Top/Right"
            },
            {
              "value": "h--middle w--left ",
              "label": "Middle/left"
            },
            {
              "value": "h--middle w--center ",
              "label": "Middle/Center"
            },
            {
              "value": "h--middle w--right ",
              "label": "Middle/Right"
            },
            {
              "value": "h--bottom w--left ",
              "label": "Bottom/Left"
            },
            {
              "value": "h--bottom w--center ",
              "label": "Bottom/Center"
            },
            {
              "value": "h--bottom w--right ",
              "label": "Bottom/Right"
            }
          ]
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading"
        },
        {
          "type": "select",
          "label": "Font family",
          "id": "font_style",
          "default": "heading-neue",
          "options": [
            {
              "value": "heading-neue",
              "label": "Neue"
            },
            {
              "value": "heading-ozymandias",
              "label": "Ozymandias"
            },
            {
              "value": "heading-neumeister-a",
              "label": "FDI Neumeister A"
            },
            {
              "value": "heading-neumeister-b",
              "label": "FDI Neumeister B"
            },
            {
              "value": "heading-sentient",
              "label": "Sentient"
            },
            {
              "value": "heading-sf-pro",
              "label": "SF Pro Text"
            }
          ]
        }
      ]
    },
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "select",
          "id": "alignment",
          "label": "Block Alignment",
          "options": [
            {
              "value": "h--top w--left ",
              "label": "Top/Left"
            },
            {
              "value": "h--top w--center ",
              "label": "Top/Center"
            },
            {
              "value": "h--top w--right ",
              "label": "Top/Right"
            },
            {
              "value": "h--middle w--left ",
              "label": "Middle/left"
            },
            {
              "value": "h--middle w--center ",
              "label": "Middle/Center"
            },
            {
              "value": "h--middle w--right ",
              "label": "Middle/Right"
            },
            {
              "value": "h--bottom w--left ",
              "label": "Bottom/Left"
            },
            {
              "value": "h--bottom w--center ",
              "label": "Bottom/Center"
            },
            {
              "value": "h--bottom w--right ",
              "label": "Bottom/Right"
            }
          ]
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "range",
          "id": "width_limit",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Image max-width",
          "default": 50
        }
      ]
    },
    {
      "type": "counter",
      "name": "Section Counter",
      "settings": [
        {
          "type": "select",
          "id": "alignment",
          "label": "Block Alignment",
          "options": [
            {
              "value": "h--top w--left ",
              "label": "Top/Left"
            },
            {
              "value": "h--top w--center ",
              "label": "Top/Center"
            },
            {
              "value": "h--top w--right ",
              "label": "Top/Right"
            },
            {
              "value": "h--middle w--left ",
              "label": "Middle/left"
            },
            {
              "value": "h--middle w--center ",
              "label": "Middle/Center"
            },
            {
              "value": "h--middle w--right ",
              "label": "Middle/Right"
            },
            {
              "value": "h--bottom w--left ",
              "label": "Bottom/Left"
            },
            {
              "value": "h--bottom w--center ",
              "label": "Bottom/Center"
            },
            {
              "value": "h--bottom w--right ",
              "label": "Bottom/Right"
            }
          ]
        }
      ]
    },
    {
      "type": "text_block",
      "name": "Text Block",
      "settings": [
        {
          "type": "select",
          "id": "alignment",
          "label": "Block Alignment",
          "options": [
            {
              "value": "h--top w--left ",
              "label": "Top/Left"
            },
            {
              "value": "h--top w--center ",
              "label": "Top/Center"
            },
            {
              "value": "h--top w--right ",
              "label": "Top/Right"
            },
            {
              "value": "h--middle w--left ",
              "label": "Middle/left"
            },
            {
              "value": "h--middle w--center ",
              "label": "Middle/Center"
            },
            {
              "value": "h--middle w--right ",
              "label": "Middle/Right"
            },
            {
              "value": "h--bottom w--left ",
              "label": "Bottom/Left"
            },
            {
              "value": "h--bottom w--center ",
              "label": "Bottom/Center"
            },
            {
              "value": "h--bottom w--right ",
              "label": "Bottom/Right"
            }
          ]
        },
        {
          "type": "richtext",
          "id": "text_block",
          "label": "Text Body"
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "Button Text"
        },
        {
          "type": "select",
          "id": "button_color",
          "label": "Color",
          "default": "btn--white",
          "options": [
            { "value": "btn--primary", "label": "Bright accent" },
            { "value": "btn--secondary", "label": "Secondary accent" },
            { "value": "btn--neutral", "label": "Text color" },
            { "value": "btn--black", "label": "Black" },
            { "value": "btn--white", "label": "White" }
          ]
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button style",
          "default": "btn uppercase",
          "options": [
            { "value": "caps--link", "label": "Capitalized text" },
            { "value": "btn uppercase", "label": "Solid button" },
            { "value": "btn--soft uppercase", "label": "Soft button" },
            { "value": "btn--outline uppercase", "label": "Outlined button" }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Arena Product Section 2"
    }
  ]
}
{% endschema %}
