{%- liquid
  if product.media.size > 1
    assign multiple_images = true
  endif

  assign includes_aspect_ratio = false
  assign current_variant = product.selected_or_first_available_variant

  if aspect_ratio != blank and aspect_ratio != 'natural'
    assign includes_aspect_ratio = true
  endif

  # Calculate the lowest discount percentage

  assign percent = 0
  if product.compare_at_price_varies or product.price_varies
    for variant in product.variants
      if variant.compare_at_price > variant.price
        assign variant_percent = variant.compare_at_price | minus: variant.price | times: 100 | divided_by: variant.compare_at_price
        if variant_percent > percent
          assign percent = variant_percent
        endif
      endif
    endfor
  else
    assign percent = product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price
  endif
-%}

{% # Prepare discount text to display inline with price %}

{%- if settings.enable_discount -%}
  {%- assign show_sale = false -%}
  {%- if product.price_varies -%}
    {%- capture displayed_discount -%}<span class="sale displayed-discount fs-body-x-small fs-body-small-ns">{{ 'products.product.on_sale_varied' | t }} {{ 'products.product.on_sale_percent' | t: value: percent }}</span>{%- endcapture -%}
  {%- else -%}
    {%- capture displayed_discount -%}<span class="displayed-discount fs-body-x-small fs-body-small-ns">{{ 'products.product.on_sale_percent' | t: value: percent }}</span>{%- endcapture -%}
    {%- assign show_sale = true -%}
  {%- endif -%}
{%- endif -%}
<div 
  style="--z-index-item: {{ forloop.rindex }}; margin-left: 5px;"
>
  <div class="product-item__inner addon">
    <div class="product-item__media{% if multiple_images %} product-item__media--multiple-images{% endif %}">
      {%- if placeholder or product.featured_media == blank -%}
        {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}

        {%- liquid
          assign media_tag = 'a'

          if placeholder
            assign media_tag = 'div'
          endif
        -%}

        <{{ media_tag }}
          class="product-item__image-link"
          {%- unless placeholder -%}
            href="{{ product.url }}"
            aria-label="{{ product.title | replace: "®", "<sup>®</sup>" | replace: "™", "<sup>™</sup>"}}"
          {%- endunless -%}
        >
          <div class="placeholder-image product-item__image">
            {{ 'product-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}
          </div>
        </{{ media_tag }}>
      {%- elsif product.featured_media -%}
        <a class="product-item__image-link" href="{{ product.url }}" aria-label="{{ product.title | replace: "®", "<sup>®</sup>" | replace: "™", "<sup>™</sup>"}}">
          {%- if multiple_images -%}
            {% render 'image' with
              id: product.media[0].id,
              image: product.media[0].preview_image,
              wrapper_class: 'product-item__image product-item__image--one',
              disable_style: includes_aspect_ratio,
              max_height: 200
            %}
            {% render 'image' with
              image: product.media[1].preview_image,
              wrapper_class: 'product-item__image product-item__image--two',
              disable_style: includes_aspect_ratio,
              max_height: 200
            %}
          {%- else -%}
            {% render 'image' with
              id: product.featured_media.id,
              image: product.featured_media,
              wrapper_class: 'product-item__image',
              disable_style: includes_aspect_ratio,
              
            %}
          {%- endif -%}
        </a>

        {%- unless product.available -%}
          <div class="product-item__wash"></div>
        {%- endunless -%}

        {%- if settings.enable_card_hover_options -%}
          {%- render 'product-item-options' with product: product, product_columns: product_columns -%}
        {%- endif -%}
      {%- endif -%}
    </div>

    <div class="addon-product-detail">
      <div class="ff-body fs-body-small fs-body-base-ns ta-c" style="text-align: left; margin-top:0px" >
        <h4 class="product-item__product-title fs-product-title fs-body-bold">
          {%- if placeholder -%}
            {{ 'homepage.onboarding.product_title' | t }}
          {%- else -%}
            <a href="{{ product.url }}">{{ product.title | replace: "®", "<sup>®</sup>" | replace: "™", "<sup>™</sup>"}}</a>
          {%- endif -%}
        </h4>

        {% if placeholder %}
          {{ 9999 | money }}

        {% elsif product.compare_at_price > product.price %}
          <span class="visually-hidden">{{ 'products.product.regular_price' | t }}</span>
          <s class="t-subdued">{{ product.compare_at_price | money }}</s>

          {% if product.price_varies %}
            {%- assign sale_price = product.price | money -%}
            {{ 'products.product.on_sale_from_html' | t: price: sale_price }}
          {% else %}
            <span class="{% if show_sale %}sale{% endif %}">{{ product.price | money }}</span>
          {% endif %}

          {{ displayed_discount }}

        {% else %}
          {% if product.price_varies %}
            {%- assign price = product.price | money -%}
            {{ 'products.product.from_lowest_price_html' | t: lowest_price: price }}
          {% else %}
            <span class="product-item__price" style="font-size:0.9em;">{{ product.price | money }}</span>
          {% endif %}

        {% endif %}

        <div>
          {% render 'unit-price' item: current_variant %}
        </div>
      </div>

      {% # Add discount to sale badge, if enabled %}

      {%- if product.compare_at_price > product.price or product.available != true -%}
        <div class="product-item__badges fs-body-x-small">
          {% if product.compare_at_price > product.price and product.available and settings.enable_sales_badge %}
            <div class="product-item__badge product-item__badge--sale">
              {%- if settings.sale_badge_includes_percent -%}
                {%- if product.compare_at_price_varies or product.price_varies -%}
                  <span class="fs-percent-bold">{{ 'products.product.on_sale_varied' | t }}</span>
                {%- else -%}
                  <span class="fs-body-bold">{{ 'products.product.on_sale' | t }}</span>
                {%- endif -%}
                &nbsp;{{ 'products.product.on_sale_percent' | t: value: percent }}
              {%- else -%}
                <span class="fs-body-bold">{{ 'products.product.on_sale' | t }}</span>
              {%- endif -%}
            </div>
          {% endif %}

          {% unless product.available or placeholder %}
            <div class="product-item__badge product-item__badge--sold-out fs-body-bold">
              {{ 'products.product.sold_out' | t }}
            </div>
          {% endunless %}
        </div>
      {%- endif -%}
      {% if product.variants.size > 1 %}
        <div class="js-enabled product__option">
         {% comment %} <div class="addon-product__border"></div>{% endcomment %}
                      <div class="product__label-wrapper" style="margin-bottom:var(--spacing-extra-small);">
                        <label class="product__label ff-heading fs-heading-4-base" style="font-size:0.9em;" for="Option1">
                          Adult Size
                        </label>
                      </div><div class="select-wrapper">
                          <select id="Option1" name="options[Adult Size]" class="input">
                            {% for variant in product.variants %}
                              <option {% unless variant.available %}disabled=true {% endunless %} data-value-handle="m-9}--0" value="{{ variant.id}}" >
                             {{ variant.title }}
                            </option>
                              {% endfor %}
                          </select>

                          
                    <span class="icon ">
                      <svg width="100%" viewBox="0 0 24 24">
                        
                            <path fill="currentColor" d="m0 6 12 12L24 6z"></path>
                    
                          
                      </svg>
              </span>
                        </div></div>
        {% endif %}

      {%- if  current_variant.available -%}
        <div class="product-item__quick-add-button-wrapper"  style="display: block">
            <div class="product-item__quick-add-qty-selector" style="
            width: 180px;
    margin-bottom: 10px;
    border-radius: 50px;
    display: flew;
    align-items: center;
    justify-content: space-around;
    margin-bottom: 10px; margin-top: 10px">
              <button type="button" style="padding-left:8px;" class="product-item__quick-add-qty-button product-item__quick-add-qty-button--minus" data-change="decrement" data-quick-add-quantity aria-label="{{ 'general.accessibility.quantity_add' | t }}">
                {% render 'icon' with icon: 'minus' %}
              </button>
              <input
                type="number"
                value="1"
                min="1"
                pattern="[0-9]*"
                aria-label="{{ 'cart.general.quantity' | t }}"
                data-quantity-input
              >
              <button type="button" style="padding-right:8px;" class="product-item__quick-add-qty-button product-item__quick-add-qty-button--plus" data-change="increment" data-quick-add-quantity aria-label="{{ 'general.accessibility.quantity_subtract' | t }}">
                {% render 'icon' with icon: 'plus' %}
              </button>
            </div>

          <button
             style="height: 40px"
            data-quick-add="{{ product.handle }}"
            data-product-id="{{ current_variant.id }}"
            type="button"
            class="product-item__quick-add-button btn btn--small btn--primary btn--full"
            test="{{  product.variants.size }}"
            {% if settings.show_quick_cart_after_quick_add %}
              data-open-quick-cart="true"
            {% endif %}
          >
            <span class="product-item__quick-add-button-text">{{ 'product.add_to_cart' | t }}</span>
            <span class="product-item__quick-add-button-text-height">x</span>
            {% render 'icon' with icon: 'plus', class: "product-item__quick-add-button-icon" %}
            <div class="btn__loading-wrap">
              <div class="btn__loading-bar"></div>
            </div>
          </button>
        </div>
      {%- endif -%}
    </div>

    {%- if settings.enable_quick_add and current_variant.available -%}
      <div class="product-item__quick-add-container"></div>
    {%- endif -%}
  </div>
</div>

